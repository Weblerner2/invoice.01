<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>testing</title>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.4.0/jspdf.umd.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.3.2/html2canvas.min.js"></script>	
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.7.1/jquery.min.js"></script>
<link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css" integrity="sha512-SnH5WK+bZxgPHs44uWIX+LLJAJ9/2PkPKZ5QiAj6Ta86w+fsb2TkcmfRyVX3pBnMFcV7oQPJkl9QevSCWr3W6A==" crossorigin="anonymous" referrerpolicy="no-referrer" />
<style>
    body {
        font-family: Arial, sans-serif;
        margin: 0;
        padding: 20px;
        background-color: #f4f4f4;
		margin-left:10px;
    }
    .invoice {
        max-width: 800px;
        margin: 0 auto;
        padding: 20px;
        background-color: #fff;
        border: 1px solid #ccc;
        border-radius: 5px;
		
    }
    table {
        width: 100%;
        border-collapse: collapse;
		table-layout:fixed;
    }
    th, td {
        border: 1px solid #ccc;
        padding: 8px;
        text-align: center;
    }
    button:not(#btn){
        padding: 10px 20px;
        background-color: #007bff;
        color: #fff;
        border: none;
        border-radius: 5px;
        cursor: pointer;
		
    }
    button:hover:not(#btn){
        background-color: #0056b3;
    }
	button:focus:not(#btn,#save){
		background-color: black;
		transition:color 1s ease;
	}
		#chg{
			background:white;
			margin-top:50px;
			
		}
		
	#cg{
			display:inline-block;
			position:relative;
			text-decoration:none;
			
			
			
		}
		#cg::after {
			content:"";
			position:absolute;
			left:50%;
			transform:translateX(-50%);
			bottom:-2px;
			width:0;
			height:2px;
			background-color: #000;
			transition:width 1s ease;
		
		
		}
	#cg:hover::after{
			width: 100%;
		}	
		[contenteditable="true"]{
		  border:none;
		  outline:none;
		}
		#btn{
		 	margin-top:25px;
			margin-left:50%;
			border-radius:7px;
			height:40px;
			width:40px;
			border: none;
			cursor: pointer;
			background-color: #007bff;
			color: #fff;
			table-layout:auto;
       
       
		}
		#btn:hover{
			 background-color: #0056b3;
		}
		#btn:active {
		  background-color:#75FBFD;
		  
		  transform: translateY(2px);
}
		.material-symbols-outlined {
			
		  font-variation-settings:
		  'FILL' 0,
		  'wght' 400,
		  'GRAD' 0,
		  'opsz' 40
		}
		.fa { margin-left: -12px;margin-right: 8px;}
		 <!-- #save{width:80px;} -->
			.cp{
				margin: 50px auto;
				padding: 20px;
				border: 1px solid black;
				width: 80%;
				}
				
				
				:root{
				  --first-color: #673AB7;
				  --first-color-light: #fff;
				  --facebook:#426782;
				  --twitter:#1da1f2;
				  --instagram:#e1306c;
				  --youtube:#ff0000; 
				}
				
				body{
				  background: var(--first-color); 
				} 
				.mainbox{
				  position:absolute;
				  left:50%;
				  top:60%;
				  transform:translate(-50%,-50%);
				}
				label{
				  position:relative;
				  background:var(--first-color-light);
				  height:50px;
				  width:150px;
				  border-radius: 35px;
				  line-height: 50px;
				  text-align: center;
				  font-size: 22px;
				  font-weight: 500;
				  text-transform: uppercase;
				  display:block;
				  color:var(--first-color);
				  cursor: pointer;
				  box-shadow: 0 0 4px rgba(0,0,0,0.5);
				  transition: all 0.3s ease;
				}
				label:hover{
				  letter-spacing: 1px;
				}
				label::before{
				  content:'Cancel';
				  position:absolute;
				  height:100%;
				  width:100%;
				  left:0;
				  top:0;
				  background:var(--first-color-light);
				  border-radius: 35px;
				  opacity: 0;
				}
				#check{
				  display:none;
				}
				#check:checked ~ label::before{
				  opacity:1;
				}
				.media-icons{
				  position:absolute;
				  left:50%;
				  top:-120px;
				  transform:translateX(-50%);
				  background:var(--first-color-light);
				  width:140%;
				  height:110%;
				  text-align: center;
				  display:flex;
				  align-items:center;
				  justify-content:space-evenly;
				  border-radius: 35px;
				  padding:4px;
				  z-index:1;
				  opacity:0;
				  pointer-events:none;
				  box-shadow: 0 0 4px rgba(0,0,0,0.5);
				  transition:all 0.3s ease;
				}
				#check:checked ~ .media-icons{
				  opacity:1;
				  pointer-events: auto;
				  top:-84px;
				}
				.media-icons::before{
				  content:'';
				  width:18px;
				  height: 18px;
				  position:absolute;
				  left:50%;
				  background:var(--first-color-light);
				  bottom:-9px;
				  transform:translateX(-50%) rotate(45deg);
				}
				.media-icons a{
				  font-size: 22px;
				  color:var(--first-color);
				  transition:all 0.3s ease;
				}
				.media-icons a:hover{
				  transform:translateY(-2px);
				}
				.media-icons a:nth-child(1):hover{
				  color:var(--facebook);
				}
				.media-icons a:nth-child(2):hover{
				  color:var(--twitter);
				}
				.media-icons a:nth-child(3):hover{
				  color:var(--instagram);
				}
				.media-icons a:nth-child(4):hover{
				  color:var(--youtube);
				}
				
				@media screen and (max-width: 400px){
				body{
					
					<!-- flex-direction: column; -->
					text-align:left;
					width:100%;
					
					height:60%;
					
					table-layout:auto;
					 cursor: pointer;
					font-size:15px;
					}
				
				
				#btn{
					margin-left:25%;
				}
				.mainbox{
					margin-top:50px;
				}
		}		
			@media screen and (max-width: 550px){
				#btn{
					margin-left:25%;
					table-layout:auto;
				}
					body{
				justify-content:center;
				width:90%;
			}
			.mainbox{
				margin-top:25%;
			}
			
			}	
			@media screen and (max-width: 380px){
				#btn{
				margin-left:-7%;
				table-layout:auto;
				font-size:12px;
				}
				#cms{
					gap:2px;
					
					display:flex;
					justify-content:left;
					max-width:18%;
					table-layout:auto;
					
				}
			
			#cg{
				display:inline-block;
				table-layout:auto;
				
			}
			.mainbox{
				margin-top:60%;
			}
			body{
				justify-content:center;
				width:90%;
				font-size:18px;
				margin-left:-10px;
			}
			}	
			
</style>
</head>
<body id="body">
<div class="invoice">
	<div style="display:flex;gap:10px;">
   <img src="https://i.ibb.co/X2h2NCp/images.png" style="height:75px;width:75px;">
 
	<h2 id="cg" style="margin-top:25px;">Advanced Invoice</h2>
	<button title="Edit the invoice" id="btn">
     	<span class="material-symbols-outlined">edit</span>
	</button>
	
	</div>
	<div id="contentToPrint">
	<div id="edit"><br>
    <p>Invoice Number: #INV2024001</p>
    <p>Date: May 28, 2024</p>
    <table id="myTable">
        <tr>
            <th>Item</th>
            <th>Quantity</th>
            <th>Price</th>
            <th>Total</th>
        </tr>
        <tr>
            <td>Product A</td>
            <td>2</td>
            <td>$50</td>
            <td>$100</td>
        </tr>
        <tr>
            <td>Product B</td>
            <td>1</td>
            <td>$75</td>
            <td>$75</td>
        </tr>
    </table><br>
	</div>
	</div>
	<div>
    <!-- <button onclick="saveAsPDF()" class="gen">Generate PDF</button> -->
		
				<div class="mainbox">
			   <input type="checkbox"  id="check">
			   <label for="check" title="download"><i class="fa-solid fa-download"></i></label>
			   <div class="media-icons">
				 <a href="#"><span class="material-symbols-outlined" id="link">link</span></a>	
				 <a> <span class="material-symbols-outlined"  id="gen">picture_as_pdf</span></a>
				 <a ><span class="material-symbols-outlined"  id="img">image</span></a>
				 <a ><span class="material-symbols-outlined" id="js">javascript</span></a>
				 <!-- <a href="#"><span><svg height="24" viewBox="0 0 24 24" width="24" id="json" xmlns="http://www.w3.org/2000/svg"><path d="m12.823 15.122c-.517 0-.816.491-.816 1.146 0 .661.311 1.126.82 1.126.517 0 .812-.49.812-1.146 0-.604-.291-1.126-.816-1.126z"/><path d="m14 2h-8c-1.104 0-2 .896-2 2v16c0 1.104.896 2 2 2h12c1.104 0 2-.896 2-2v-12zm-5.978 14.704c0 .961-.461 1.296-1.2 1.296-.176 0-.406-.029-.557-.08l.086-.615c.104.035.239.06.391.06.319 0 .52-.145.52-.67v-2.122h.761v2.131zm1.459 1.291c-.385 0-.766-.1-.955-.205l.155-.631c.204.105.521.211.846.211.35 0 .534-.146.534-.365 0-.211-.159-.331-.564-.476-.562-.195-.927-.506-.927-.996 0-.576.481-1.017 1.277-1.017.38 0 .659.08.861.171l-.172.615c-.135-.065-.375-.16-.705-.16s-.491.15-.491.325c0 .215.19.311.627.476.596.22.876.53.876 1.006.001.566-.436 1.046-1.362 1.046zm3.306.005c-1.001 0-1.586-.755-1.586-1.716 0-1.012.646-1.768 1.642-1.768 1.035 0 1.601.776 1.601 1.707-.001 1.107-.671 1.777-1.657 1.777zm4.947-.055h-.802l-.721-1.302c-.2-.359-.419-.795-.585-1.19l-.016.005c.021.445.031.921.031 1.472v1.016h-.701v-3.373h.891l.701 1.236c.2.354.4.775.552 1.155h.014c-.05-.445-.065-.9-.065-1.406v-.985h.702v3.372zm-3.734-8.945c-.553 0-1 0-1 0v-5l5 5z"/></svg></span></a> -->
				
			   </div>
			 </div>
					
		
		
		
		<!-- <span class="material-symbols-outlined">upload_file</span> -->
			 <!-- <span class="material-symbols-outlined">download_done</span> -->
	
		
	<div id="cms">	
	<button id="save">
	<!-- <i class="fa fa-spinner fa-spin"></i> -->
	SAVE 
	</button>
	
	<button id="addButton">r+</button>
	<button id="removeButton">r-</button>
	<button id="addColumnButton">c+</button>
	<button id="removeColumnButton">c-</button>
	</div>
	</div>
</div>

<script>
	let invoiceTitle=document.getElementById('cg');
	let btn=document.getElementById('btn');
	let edit=document.getElementById('edit');
	let save=document.getElementById('save');
	
		body.addEventListener('selectstart',(e)=>{
			e.preventDefault();
		});
	
	$(document).ready(function(){
		$("#save").hide();
		$("#addButton").hide();
		$("#removeButton").hide();
		$("#addColumnButton").hide();
		$("#removeColumnButton").hide();
	
	
    btn.addEventListener('click', function(){
     
            edit.contentEditable = true;
			$("#save").show(1000);
			$("#addButton").show(1000);
			$("#removeButton").show(1000);
			$("#addColumnButton").show(1000);
			$("#removeColumnButton").show(1000);
        });
	
});

	function combined(){
		make();
		saveTable();
		
	}
	
	
	function make(){
		save.innerHTML="<i class='fa fa-spinner fa-spin'></i>Saving";
		save.style.width="120px";
		setTimeout(function(){
			save.innerHTML="Saved !!";
			 setTimeout(function(){
                   save.innerText = 'SAVE';
                    
                    setTimeout(function() {
                        
                        save.style.display = 'none';
						$("#addButton").hide();
						$("#removeButton").hide();
						$("#addColumnButton").hide();
						$("#removeColumnButton").hide();
						 edit.contentEditable = false;
                    }, 2000);
                    
                }, 2000);
		
		},4000);
	}
	
	
		
		
		
		 function saveTable() {
            const table = document.getElementById('myTable');
            const rows = table.rows;

            for (let i = 1; i < rows.length; i++) {
                const cells = rows[i].cells;
                for (let j = 0; j < cells.length; j++) {
                    const input = cells[j].querySelector('input');
                    if (input) {
                        cells[j].innerText = input.value;
                    }
                }
            }
        }
		
		
		
		save.addEventListener('click',combined);

		  const myTable = document.querySelector('#myTable');
		  const addButton = document.querySelector('#addButton');
		  const removeButton = document.querySelector('#removeButton');	

		  function addRow() {
			const newRow = document.createElement('tr');
			for (let i = 1; i <= 4; i++) { // Adding 3 cells to the new row
			  const newCell = document.createElement('td');
			  newCell.textContent = i.length;
			  newRow.appendChild(newCell);
			}
			myTable.appendChild(newRow);
		  }

		  function removeRow() {
			const rows = myTable.getElementsByTagName('tr');
			if (rows.length > 1) {
			  myTable.removeChild(rows[rows.length - 1]);
			} else {
			  alert('Cannot remove the last row!');
			}
		  }
		
	
function addColumn() {
  const rows = myTable.rows;
  for (let i = 0; i < rows.length; i++) {
    const newCell = document.createElement('td');
    rows[i].appendChild(newCell);
  }
}

			  function removeColumn() {
			const rows = myTable.rows;
			if (rows.length > 0) {
			  for (let i = 0; i < rows.length; i++) {
				const cells = rows[i].cells;
				if (cells.length > 1) {
				  rows[i].deleteCell(cells.length - 1);
				} else {
				  alert('Cannot remove the last column!');
				}
			  }
			} else {
			  alert('No columns to remove!');
			}
		  }

		  addButton.addEventListener('click', addRow);
		  removeButton.addEventListener('click', removeRow);
		  addColumnButton.addEventListener('click', addColumn);
		  removeColumnButton.addEventListener('click', removeColumn);
		
		function data(){
		 var tableData = [];
		
		 var jsonData = JSON.stringify(tableData);
		var blob = new Blob([jsonData], { type: "application/json" });
		var url = URL.createObjectURL(blob);
		
		var a = document.createElement('a');
		a.href = url;
		a.download = 'table_data.json';
		document.body.appendChild(a);
		a.click();
		document.body.removeChild(a);
	}
		$(document).ready(function(){
		 $("#img").click(function(){
			$("#contentToPrint").addClass("cp");
			html2canvas(document.getElementById("contentToPrint")).then(function(canvas) {
        var imgData = canvas.toDataURL('image/png');
        
        // Create a link element
        var downloadLink = document.createElement('a');
        downloadLink.href = imgData;
        downloadLink.download = '1.png';
        
        // Append the link to the body and click it to trigger download
        document.body.appendChild(downloadLink);
        downloadLink.click();
        document.body.removeChild(downloadLink);
		setTimeout(function(){
		$('#contentToPrint').removeClass("cp"); // Remove the added class after a certain time (e.g., 3 seconds)
    }, 5000); 
		
		});
	});
		
});

	$(document).ready(function(){
		 $("#js").click(function(){
			$("#contentToPrint").addClass("cp");
				
			
			  var data = document.getElementById('contentToPrint').innerText; // Get the text content
			  var jsonData = JSON.stringify(data);
			  var blob = new Blob([jsonData], { type: "application/json" });

			  var url = URL.createObjectURL(blob);

			  var a = document.createElement('a');
			  a.href = url;
			  a.download = 'data.json';
			  document.body.appendChild(a);
			  a.click();

			  URL.revokeObjectURL(url); // Release the object URL
			  document.body.removeChild(a);
  
	
			setTimeout(function(){
		$('#contentToPrint').removeClass("cp"); // Remove the added class after a certain time (e.g., 3 seconds)
    }, 5000); 
	});
});

		
		$(document).ready(function(){
		 $("#gen").click(function(){
			$("#contentToPrint").addClass("cp");
			const filename = '01.pdf';

		  const contentToPrint = document.getElementById('contentToPrint');

		  html2pdf()
			.from(contentToPrint)
			.save(filename);
				
			setTimeout(function(){
		$('#contentToPrint').removeClass("cp"); // Remove the added class after a certain time (e.g., 3 seconds)
    }, 5000); 
  });
			
  
 });
		$(document).ready(function(){
		 $("#link").click(function(){
			$("#contentToPrint").addClass("cp");
			
				 let tableData = document.querySelector('#contentToPrint').outerHTML;
				var tableDataURL = 'data:text/html;charset=utf-8,' + encodeURIComponent(tableData);
				
				var tempElement = document.createElement('textarea');
				tempElement.value = tableDataURL;
				document.body.appendChild(tempElement);
				tempElement.select();
				document.execCommand('copy');
				document.body.removeChild(tempElement);

				alert('Table data URL copied to clipboard!');
				
			setTimeout(function(){$('#contentToPrint').removeClass("cp"); }, 5000); 
  });
 });
			
	
</script>	

	<script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.9.3/html2pdf.bundle.min.js"></script>


</body>
</html>
